<div class="row-fluid auto-create">
  <div class="span8">
    <form class="form-horizontal" ng-submit="createUser()">
      <fieldset>
        <legend>Send a message</legend>
        <div class="control-group" ng-controller="UserSearchCtrl">
          <label class="control-label" for="recipients">Recipients:</label>
          <div class="controls">
            <input type="hidden" ui-select2="usernameSelect" ng-model="selectedUsers" class="span12" ng-multiple>
          </div>
        </div>
        <div class="control-group">
          <label class="control-label" for="message">Message:</label>
          <div class="controls">
            <textarea name="message" class="span12" ng-model="message.text" rows="2"></textarea>
            <div file-upload></div>
          </div>
        </div>
        <div class="form-actions">
          <span ng-class="{'text-error': message.text.length > 256}">{{256 - message.text.length}}</span>
          <span class='pull-right'>
            <button class='btn btn-small' ng-show='show_file_upload_button()' data-attach-btn>File</button>
            <button type="submit" ng-disabled="!enable_send_button() || !selectedUsers.length" class="btn btn-primary btn-small">Send</button>
          </span>
        </div>
      </fieldset>
    </form>
  </div>
</div>
